name=PropertiesConfig
property.filename = logs
appenders = console, file

appender.console.type = Console
appender.console.name = STDOUT
appender.console.layout.type = PatternLayout
appender.console.layout.pattern = %d{HH:mm:ss.SSS} [traceId=%X{traceId} / spanId=%X{spanId}] [%t] %-5level %logger{36} - %msg %X%n

appender.file.type=RollingFile
appender.file.name=LOGFILE
appender.file.fileName=logs/logs.log
appender.file.filePattern=logs/logs-%d{yyyy-MM-dd}.log.gz
appender.file.layout.pair.type=KeyValuePair
appender.file.layout.pair.key=traceId
appender.file.layout.pair.value=$${ctx:X-B3-TraceId}
appender.file.layout.pair2.type=KeyValuePair
appender.file.layout.pair2.key=spanId
appender.file.layout.pair2.value=$${ctx:X-B3-SpanId}
appender.file.layout.type=JsonLayout
appender.file.layout.compact=true
appender.file.layout.eventEol=true
appender.file.layout.stacktraceAsString=true
appender.file.policies.type=Policies
appender.file.policies.time.type=TimeBasedTriggeringPolicy
appender.file.policies.time.interval=1
appender.file.policies.time.modulate=true
appender.file.strategy.type=DefaultRolloverStrategy
appender.file.strategy.action.type=delete
appender.file.strategy.action.basePath=logs
appender.file.strategy.action.maxDepth=1
appender.file.strategy.action.condition.type=IfAccumulatedFileCount
appender.file.strategy.action.condition.exceeds=3
appender.file.strategy.action.PathConditions.type=IfFileName
appender.file.strategy.action.PathConditions.glob=*.log.gz

rootLogger.level = info
rootLogger.appenderRefs = stdout, file, tracing
rootLogger.appenderRef.stdout.ref = STDOUT
rootLogger.appenderRef.file.ref = LOGFILE